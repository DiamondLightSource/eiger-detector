PROGRAM=eiger-detector
VERSION=1-4-4
TAR_FILE=none

build()
{
    git checkout -- ../configure/RELEASE

    ${CMAKE_BIN}/cmake \
                       -DBoost_NO_BOOST_CMAKE=ON \
                       -DZEROMQ_ROOTDIR=${ZEROMQ_PREFIX} \
                       -DLOG4CXX_ROOT_DIR=${LOG4CXX_PREFIX} \
                       -DODINDATA_ROOT_DIR=${ODINDATA_PREFIX} \
                       -DCMAKE_INSTALL_RPATH_USE_LINK_PATH=ON \
                       -DCMAKE_INSTALL_PREFIX=${TARGET_PREFIX} \
                       ${BUILD_SCRIPT_DIR}/data
    make VERBOSE=1 && make install
    
    # Removing pesky dist dir just in case a previous build is left over
    rm -rf $BUILD_SCRIPT_DIR/tools/python/dist 

    python_depends NUMPY PYZMQ H5PY ODINCONTROL ODINDATA
    
    export SRC=$BUILD_SCRIPT_DIR/data/tools/python
    setuptools_build # Defined in Python/CONFIG

    export SRC=$BUILD_SCRIPT_DIR/control
    setuptools_build # Defined in Python/CONFIG
}
